import{Fragment as e,__plugin_vue_export_helper_default as t,computed as n,createApp as r,createBaseVNode as i,createCommentVNode as a,createElementBlock as o,createPinia as s,defineComponent as c,normalizeClass as l,normalizeStyle as u,onMounted as d,onUnmounted as f,openBlock as p,ref as m,renderList as h,toDisplayString as g}from"./HelloWorld-jixbm2d5.js";const _={class:`page-container`},v={class:`game-container`},y={class:`game-header`},b={class:`level-controls`},x=[`onClick`],S={class:`game-controls`},ee={class:`time-display`},te={class:`control-buttons`},ne=[`disabled`],C=[`disabled`],w=[`disabled`],T={class:`score-display`},E={class:`score-item`},D={class:`value`},O={class:`score-item`},re={class:`value`},ie={class:`score-item`},ae={class:`value`},oe=[`onClick`],k={key:0,class:`white-block`},A=6,j=12;var M=c({__name:`GameApp`,setup(t){let r=m(1),s=m(0),c=m(0),M=m([]),N=m(null),P=m(null),F=m(null),I=m(60),L=m(!1),R=m(!1),z=m(25),B=n(()=>Math.max(1,6-r.value)),V=n(()=>Math.min(10,r.value*2)),H=n(()=>Math.max(500,5e3/V.value)),U=()=>{M.value=[];for(let e=0;e<A;e++)for(let t=0;t<j;t++)M.value.push({id:e*j+t,row:e,col:t,isActive:!1,timeLeft:0,isAnimating:!1})},W=()=>{let e=M.value.filter(e=>!e.isActive);if(e.length===0)return;let t=e[Math.floor(Math.random()*e.length)];t.isActive=!0,t.timeLeft=B.value*1e3,c.value++},G=async e=>{!e.isActive||!L.value||(e.isAnimating=!0,s.value++,setTimeout(()=>{e.isActive=!1,e.isAnimating=!1,e.timeLeft=0},200))},K=()=>{M.value.forEach(e=>{e.isActive&&!e.isAnimating&&(e.timeLeft-=100,e.timeLeft<=0&&(e.isActive=!1,e.timeLeft=0))})},q=()=>{J(),U(),s.value=0,c.value=0,I.value=60,L.value=!0,R.value?X():Z(),N.value=setInterval(()=>{L.value&&W()},H.value),P.value=setInterval(()=>{K()},100),F.value=setInterval(()=>{I.value--,I.value<=0&&ue()},1e3)},J=()=>{L.value=!1,N.value&&(clearInterval(N.value),N.value=null),P.value&&(clearInterval(P.value),P.value=null),F.value&&(clearInterval(F.value),F.value=null)},se=()=>{J(),U(),s.value=0,c.value=0,I.value=60,L.value=!1},ce=e=>{r.value=e,L.value&&q()},Y=n(()=>c.value===0?0:Math.round(s.value/c.value*100)),le=n(()=>{let e=Math.floor(I.value/60),t=I.value%60;return`${e}:${t.toString().padStart(2,`0`)}`}),X=()=>{let e=window.innerWidth,t=window.innerHeight,n=R.value?150:250,r=e-40,i=t-n,a=Math.floor(r/j),o=Math.floor(i/A);z.value=Math.min(a,o,50),z.value=Math.max(z.value,15)},Z=async()=>{try{R.value?(await document.exitFullscreen(),R.value=!1):(await document.documentElement.requestFullscreen(),R.value=!0),setTimeout(()=>{X()},100)}catch(e){console.error(`全螢幕切換失敗:`,e)}},Q=()=>{R.value=!!document.fullscreenElement,X()},$=()=>{X()},ue=()=>{J(),L.value=!1,setTimeout(()=>{alert(`遊戲結束！\n最終分數: ${s.value}\n總出現數量: ${c.value}\n命中率: ${Y.value}%`),R.value&&document.exitFullscreen().catch(()=>{})},100)};return d(()=>{U(),X(),document.addEventListener(`fullscreenchange`,Q),window.addEventListener(`resize`,$)}),f(()=>{J(),document.removeEventListener(`fullscreenchange`,Q),window.removeEventListener(`resize`,$),R.value&&document.exitFullscreen().catch(()=>{})}),(t,n)=>(p(),o(`div`,_,[n[5]||=i(`header`,{class:`page-header`},[i(`nav`,null,[i(`a`,{href:`/`},`Home`),i(`a`,{href:`/game.html`,class:`current`},`Game`),i(`a`,{href:`/about.html`},`About`)])],-1),i(`div`,v,[i(`div`,y,[i(`div`,b,[n[0]||=i(`span`,{class:`label`},`難度:`,-1),(p(),o(e,null,h(5,e=>i(`button`,{key:e,class:l([`level-btn`,{active:r.value===e}]),onClick:t=>ce(e)},g(e),11,x)),64))]),i(`div`,S,[i(`div`,ee,[n[1]||=i(`span`,{class:`label`},`時間:`,-1),i(`span`,{class:l([`time-value`,{warning:I.value<=10,danger:I.value<=5}])},g(le.value),3)]),i(`div`,te,[i(`button`,{class:`control-btn start`,onClick:q,disabled:L.value},`開始遊戲`,8,ne),i(`button`,{class:`control-btn stop`,onClick:J,disabled:!L.value},`停止遊戲`,8,C),i(`button`,{class:`control-btn reset`,onClick:se},`重置遊戲`),i(`button`,{class:`control-btn fullscreen`,onClick:Z,disabled:L.value},g(R.value?`退出全螢幕`:`全螢幕`),9,w)])]),i(`div`,T,[i(`div`,E,[n[2]||=i(`span`,{class:`label`},`分數:`,-1),i(`span`,D,g(s.value),1)]),i(`div`,O,[n[3]||=i(`span`,{class:`label`},`總數:`,-1),i(`span`,re,g(c.value),1)]),i(`div`,ie,[n[4]||=i(`span`,{class:`label`},`命中率:`,-1),i(`span`,ae,g(Y.value)+`%`,1)])])]),i(`div`,{class:`game-board`,style:u({gridTemplateColumns:`repeat(12, ${z.value}px)`,gridTemplateRows:`repeat(6, ${z.value}px)`})},[(p(!0),o(e,null,h(M.value,e=>(p(),o(`div`,{key:e.id,class:l([`cell`,{active:e.isActive,animating:e.isAnimating}]),style:u({width:`${z.value}px`,height:`${z.value}px`}),onClick:t=>G(e)},[e.isActive?(p(),o(`div`,k,[i(`div`,{class:`timer-bar`,style:u({width:`${e.timeLeft/(B.value*1e3)*100}%`})},null,4)])):a(``,!0)],14,oe))),128))],4)])]))}}),N=t(M,[[`__scopeId`,`data-v-90b457b4`]]);const P=r(N);P.use(s()),P.mount(`#app`);