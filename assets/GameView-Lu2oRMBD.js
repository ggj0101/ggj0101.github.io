import{Fragment as e,__plugin_vue_export_helper_default as t,computed as n,createBaseVNode as r,createCommentVNode as i,createElementBlock as a,defineComponent as o,normalizeClass as s,normalizeStyle as c,onMounted as l,onUnmounted as u,openBlock as d,ref as f,renderList as p,toDisplayString as m}from"./index-B183wR1T.js";const h={class:`game-container`},g={class:`game-header`},_={class:`level-controls`},v=[`onClick`],y={class:`game-controls`},b={class:`time-display`},x={class:`control-buttons`},S=[`disabled`],C=[`disabled`],w={class:`score-display`},ee={class:`score-item`},T={class:`value`},E={class:`score-item`},D={class:`value`},O={class:`score-item`},k={class:`value`},A={class:`game-board`},j=[`onClick`],M={key:0,class:`white-block`},N=12,P=24;var F=o({__name:`GameView`,setup(t){let o=f(1),F=f(0),I=f(0),L=f([]),R=f(null),z=f(null),B=f(null),V=f(60),H=f(!1),U=n(()=>Math.max(1,6-o.value)),W=n(()=>Math.min(10,o.value*2)),G=n(()=>Math.max(500,5e3/W.value)),K=()=>{L.value=[];for(let e=0;e<N;e++)for(let t=0;t<P;t++)L.value.push({id:e*P+t,row:e,col:t,isActive:!1,timeLeft:0,isAnimating:!1})},q=()=>{let e=L.value.filter(e=>!e.isActive);if(e.length===0)return;let t=e[Math.floor(Math.random()*e.length)];t.isActive=!0,t.timeLeft=U.value*1e3,I.value++},J=async e=>{!e.isActive||!H.value||(e.isAnimating=!0,F.value++,setTimeout(()=>{e.isActive=!1,e.isAnimating=!1,e.timeLeft=0},200))},Y=()=>{L.value.forEach(e=>{e.isActive&&!e.isAnimating&&(e.timeLeft-=100,e.timeLeft<=0&&(e.isActive=!1,e.timeLeft=0))})},X=()=>{Z(),K(),F.value=0,I.value=0,V.value=60,H.value=!0,R.value=setInterval(()=>{H.value&&q()},G.value),z.value=setInterval(()=>{Y()},100),B.value=setInterval(()=>{V.value--,V.value<=0&&re()},1e3)},Z=()=>{H.value=!1,R.value&&(clearInterval(R.value),R.value=null),z.value&&(clearInterval(z.value),z.value=null),B.value&&(clearInterval(B.value),B.value=null)},Q=()=>{Z(),K(),F.value=0,I.value=0,V.value=60,H.value=!1},te=e=>{o.value=e,H.value&&X()},$=n(()=>I.value===0?0:Math.round(F.value/I.value*100)),ne=n(()=>{let e=Math.floor(V.value/60),t=V.value%60;return`${e}:${t.toString().padStart(2,`0`)}`}),re=()=>{Z(),H.value=!1,alert(`遊戲結束！\n最終分數: ${F.value}\n總出現數量: ${I.value}\n命中率: ${$.value}%`)};return l(()=>{K()}),u(()=>{Z()}),(t,n)=>(d(),a(`div`,h,[r(`div`,g,[r(`div`,_,[n[0]||=r(`span`,{class:`label`},`難度:`,-1),(d(),a(e,null,p(5,e=>r(`button`,{key:e,class:s([`level-btn`,{active:o.value===e}]),onClick:t=>te(e)},m(e),11,v)),64))]),r(`div`,y,[r(`div`,b,[n[1]||=r(`span`,{class:`label`},`時間:`,-1),r(`span`,{class:s([`time-value`,{warning:V.value<=10,danger:V.value<=5}])},m(ne.value),3)]),r(`div`,x,[r(`button`,{class:`control-btn start`,onClick:X,disabled:H.value},`開始遊戲`,8,S),r(`button`,{class:`control-btn stop`,onClick:Z,disabled:!H.value},`停止遊戲`,8,C),r(`button`,{class:`control-btn reset`,onClick:Q},`重置遊戲`)])]),r(`div`,w,[r(`div`,ee,[n[2]||=r(`span`,{class:`label`},`分數:`,-1),r(`span`,T,m(F.value),1)]),r(`div`,E,[n[3]||=r(`span`,{class:`label`},`總數:`,-1),r(`span`,D,m(I.value),1)]),r(`div`,O,[n[4]||=r(`span`,{class:`label`},`命中率:`,-1),r(`span`,k,m($.value)+`%`,1)])])]),r(`div`,A,[(d(!0),a(e,null,p(L.value,e=>(d(),a(`div`,{key:e.id,class:s([`cell`,{active:e.isActive,animating:e.isAnimating}]),onClick:t=>J(e)},[e.isActive?(d(),a(`div`,M,[r(`div`,{class:`timer-bar`,style:c({width:`${e.timeLeft/(U.value*1e3)*100}%`})},null,4)])):i(``,!0)],10,j))),128))])]))}}),I=t(F,[[`__scopeId`,`data-v-92ea760b`]]);export{I as default};